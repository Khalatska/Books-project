{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shop.js","../src/js/support-ukr-shop.js"],"sourcesContent":["import amazon from '../img/amazon1.png';\nimport apple from '../img/apple-books.png';\n\nconst shoppedBooks = document.querySelector('.shopped-books');\n\nconst storedBooks = JSON.parse(localStorage.getItem('shopping-list')) || [];\n\nshoppedBooks.insertAdjacentHTML('beforeend', renderShopList(storedBooks));\n\nfunction renderShopList(storedBooks) {\n  const isLargeScreen = window.innerWidth > 768;\n  return storedBooks\n    .map(\n      ({\n        book_image,\n        title,\n        list_name,\n        description,\n        author,\n        buy_links,\n        _id,\n      }) => {\n        if (!description) {\n          description =\n            'Sorry, but this book does not have an accessible description. Try reading it on the website of one of the shops';\n        }\n        const maxDescriptionLength = isLargeScreen ? 300 : 86;\n        const maxTitleLength = isLargeScreen ? 40 : 16;\n        return `<li class=\"bought-book\">\n        <div class=\"img-container-shopping\"> \n    <img src=\"${book_image}\" alt=\"${title}\" class=\"img-bought-book\"/> </div>\n    <div class=\"description-container\">\n    <h2 class=\"bought-book-title\">${sliceDescription(16, title)}</h2>\n    <p class=\"bought-book-name\">${sliceDescription(\n      maxTitleLength,\n      list_name\n    )}</p>\n    <p class=\"bought-book-description\">${sliceDescription(\n      maxDescriptionLength,\n      description\n    )}</p>\n    <div class=\"author-shop-links\">\n    <p class=\"bought-book-author\">${sliceDescription(15, author)}</p>\n    <ul class=\"shopping-shops\">\n      <li> \n    <a href=\"${\n      buy_links.filter(({ name }) => {\n        return name === 'Amazon';\n      }).url\n    }\" target=\"_blanket\" class=\"shopping-shops-link\"><img src=\"${amazon}\" alt=\"Amazon\" class=\"img-shop-icon\"/></a>\n    </li>\n    <li> \n    <a href=\"${\n      buy_links.filter(({ name }) => {\n        return name === 'Apple';\n      }).url\n    }\" target=\"_blank\" class=\"shopping-shops-link\"><img src=\"${apple}\" alt=\"Apple Books\" class=\"img-shop-icon-apple\"/></a>\n    </li>\n    </ul>\n    </div>\n    </div>\n\n    <button type=\"button\" data-id=${_id} class=\"btn-delete-book\">\n    <svg class=\"trash-icon\">\n    <use href=\"../img/sprite.svg#icon-trash\"></use></svg></button>\n \n    </li>`;\n      }\n    )\n    .join('');\n}\n\naddDeleteBTn();\n\nfunction addDeleteBTn() {\n  const btnDelete = document.querySelectorAll('.btn-delete-book');\n\n  btnDelete.forEach(btn => {\n    btn.addEventListener('click', event => {\n      const bookId = event.currentTarget.dataset.id;\n      deleteBook(bookId);\n    });\n  });\n}\n\nfunction deleteBook(bookId) {\n  const bookIndex = storedBooks.findIndex(book => bookId === book._id);\n  if (bookIndex !== -1) {\n    storedBooks.splice(bookIndex, 1);\n    localStorage.setItem('shopping-list', JSON.stringify(storedBooks));\n    updateBooks();\n    shoppedBooks.innerHTML = '';\n    shoppedBooks.insertAdjacentHTML('beforeend', renderShopList(storedBooks));\n\n    addDeleteBTn();\n  }\n}\n\nupdateBooks();\n\nfunction updateBooks() {\n  const containerEmpty = document.querySelector('.container-empty-list');\n  if (storedBooks.length === 0) {\n    containerEmpty.style.display = 'flex';\n    shoppedBooks.style.display = 'none';\n  } else {\n    containerEmpty.style.display = 'none';\n    shoppedBooks.style.display = 'flex';\n  }\n}\n\nfunction sliceDescription(length, title) {\n  if (title.length > length) {\n    return title.slice(0, length) + '...';\n  } else {\n    return title;\n  }\n}\n","window.addEventListener('DOMContentLoaded', () => {\n  const supportContainer = document.querySelector('.support-container');\n\n  function toggleSupportContainer() {\n    if (window.innerWidth > 1439) {\n      supportContainer.style.display = 'flex';\n    } else {\n      supportContainer.style.display = 'none';\n    }\n  }\n\n  toggleSupportContainer();\n\n  window.addEventListener('resize', toggleSupportContainer);\n});\n"],"names":["shoppedBooks","storedBooks","renderShopList","isLargeScreen","book_image","title","list_name","description","author","buy_links","_id","maxDescriptionLength","maxTitleLength","sliceDescription","name","amazon","apple","addDeleteBTn","btn","event","bookId","deleteBook","bookIndex","book","updateBooks","containerEmpty","length","supportContainer","toggleSupportContainer"],"mappings":"4DAGA,MAAMA,EAAe,SAAS,cAAc,gBAAgB,EAEtDC,EAAc,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,GAAK,GAEzED,EAAa,mBAAmB,YAAaE,EAAeD,CAAW,CAAC,EAExE,SAASC,EAAeD,EAAa,CACnC,MAAME,EAAgB,OAAO,WAAa,IAC1C,OAAOF,EACJ,IACC,CAAC,CACC,WAAAG,EACA,MAAAC,EACA,UAAAC,EACA,YAAAC,EACA,OAAAC,EACA,UAAAC,EACA,IAAAC,CACR,IAAY,CACCH,IACHA,EACE,mHAEJ,MAAMI,EAAuBR,EAAgB,IAAM,GAC7CS,EAAiBT,EAAgB,GAAK,GAC5C,MAAO;AAAA;AAAA,gBAECC,CAAU,UAAUC,CAAK;AAAA;AAAA,oCAELQ,EAAiB,GAAIR,CAAK,CAAC;AAAA,kCAC7BQ,EAC5BD,EACAN,CACN,CAAK;AAAA,yCACoCO,EACnCF,EACAJ,CACN,CAAK;AAAA;AAAA,oCAE+BM,EAAiB,GAAIL,CAAM,CAAC;AAAA;AAAA;AAAA,eAI1DC,EAAU,OAAO,CAAC,CAAE,KAAAK,KACXA,IAAS,QACjB,EAAE,GACJ,6DAA4DC,CAAM;AAAA;AAAA;AAAA,eAIjEN,EAAU,OAAO,CAAC,CAAE,KAAAK,KACXA,IAAS,OACjB,EAAE,GACJ,2DAA0DE,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAMhCN,CAAG;AAAA;AAAA;AAAA;AAAA,UAKhC,CACF,EACA,KAAK,EAAE,CACZ,CAEAO,IAEA,SAASA,GAAe,CACJ,SAAS,iBAAiB,kBAAkB,EAEpD,QAAQC,GAAO,CACvBA,EAAI,iBAAiB,QAASC,GAAS,CACrC,MAAMC,EAASD,EAAM,cAAc,QAAQ,GAC3CE,EAAWD,CAAM,CACvB,CAAK,CACL,CAAG,CACH,CAEA,SAASC,EAAWD,EAAQ,CAC1B,MAAME,EAAYrB,EAAY,UAAUsB,GAAQH,IAAWG,EAAK,GAAG,EAC/DD,IAAc,KAChBrB,EAAY,OAAOqB,EAAW,CAAC,EAC/B,aAAa,QAAQ,gBAAiB,KAAK,UAAUrB,CAAW,CAAC,EACjEuB,IACAxB,EAAa,UAAY,GACzBA,EAAa,mBAAmB,YAAaE,EAAeD,CAAW,CAAC,EAExEgB,IAEJ,CAEAO,IAEA,SAASA,GAAc,CACrB,MAAMC,EAAiB,SAAS,cAAc,uBAAuB,EACjExB,EAAY,SAAW,GACzBwB,EAAe,MAAM,QAAU,OAC/BzB,EAAa,MAAM,QAAU,SAE7ByB,EAAe,MAAM,QAAU,OAC/BzB,EAAa,MAAM,QAAU,OAEjC,CAEA,SAASa,EAAiBa,EAAQrB,EAAO,CACvC,OAAIA,EAAM,OAASqB,EACVrB,EAAM,MAAM,EAAGqB,CAAM,EAAI,MAEzBrB,CAEX,CCrHA,OAAO,iBAAiB,mBAAoB,IAAM,CAChD,MAAMsB,EAAmB,SAAS,cAAc,oBAAoB,EAEpE,SAASC,GAAyB,CAC5B,OAAO,WAAa,KACtBD,EAAiB,MAAM,QAAU,OAEjCA,EAAiB,MAAM,QAAU,MAEpC,CAEDC,IAEA,OAAO,iBAAiB,SAAUA,CAAsB,CAC1D,CAAC"}