{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shop.js"],"sourcesContent":["import amazon from '../img/amazon1.png';\nimport apple from '../img/apple-books.png';\n\nconst shoppedBooks = document.querySelector('.shopped-books');\n\nconst storedBooks = JSON.parse(localStorage.getItem('shopping-list')) || [];\n\nshoppedBooks.insertAdjacentHTML('beforeend', renderShopList(storedBooks));\n\nfunction renderShopList(storedBooks) {\n  return storedBooks\n    .map(\n      ({\n        book_image,\n        title,\n        list_name,\n        description,\n        author,\n        buy_links,\n        _id,\n      }) => {\n        if (!description) {\n          description =\n            'Sorry, but this book does not have an accessible description. Try reading it on the website of one of the shops';\n        }\n        return `<li class=\"bought-book\">\n        <div class=\"img-container-shopping\"> \n    <img src=\"${book_image}\" alt=\"${title}\" class=\"img-bought-book\"/> </div>\n    <div class=\"description-container\">\n    <h2 class=\"bought-book-title\">${title}</h2>\n    <p class=\"bought-book-name\">${sliceDescription(16, list_name)}</p>\n    <p class=\"bought-book-description\">${sliceDescription(100, description)}</p>\n    <div class=\"author-shop-links\">\n    <p class=\"bought-book-author\">${sliceDescription(15, author)}</p>\n    <ul class=\"shopping-shops\">\n      <li> \n    <a href=\"${\n      buy_links.filter(({ name }) => {\n        return name === 'Amazon';\n      }).url\n    }\" target=\"_blanket\" class=\"shopping-shops-link\"><img src=\"${amazon}\" alt=\"Amazon\" class=\"img-shop-icon\"/></a>\n    </li>\n    <li> \n    <a href=\"${\n      buy_links.filter(({ name }) => {\n        return name === 'Apple';\n      }).url\n    }\" target=\"_blank\" class=\"shopping-shops-link\"><img src=\"${apple}\" alt=\"Apple Books\" class=\"img-shop-icon-apple\"/></a>\n    </li>\n    </ul>\n    </div>\n    </div>\n\n    <button type=\"button\" data-id=${_id} class=\"btn-delete-book\">\n    <svg class=\"trash-icon\">\n    <use href=\"./img/sprite.svg#icon-trash\"></use></svg></button>\n \n    </li>`;\n      }\n    )\n    .join('');\n}\n\naddDeleteBTn();\n\nfunction addDeleteBTn() {\n  const btnDelete = document.querySelectorAll('.btn-delete-book');\n\n  btnDelete.forEach(btn => {\n    btn.addEventListener('click', event => {\n      const bookId = event.currentTarget.dataset.id;\n      deleteBook(bookId);\n    });\n  });\n}\n\nfunction deleteBook(bookId) {\n  const bookIndex = storedBooks.findIndex(book => bookId === book._id);\n  if (bookIndex !== -1) {\n    storedBooks.splice(bookIndex, 1);\n    localStorage.setItem('shopping-list', JSON.stringify(storedBooks));\n    updateBooks();\n    shoppedBooks.innerHTML = '';\n    shoppedBooks.insertAdjacentHTML('beforeend', renderShopList(storedBooks));\n\n    addDeleteBTn();\n  }\n}\n\nupdateBooks();\n\nfunction updateBooks() {\n  const containerEmpty = document.querySelector('.container-empty-list');\n  if (storedBooks.length === 0) {\n    containerEmpty.style.display = 'block';\n    shoppedBooks.style.display = 'none';\n  } else {\n    containerEmpty.style.display = 'none';\n    shoppedBooks.style.display = 'flex';\n  }\n}\n\nfunction sliceDescription(length, title) {\n  if (title.length > length) {\n    return title.slice(0, length) + '...';\n  } else {\n    return title;\n  }\n}\n"],"names":["shoppedBooks","storedBooks","renderShopList","book_image","title","list_name","description","author","buy_links","_id","sliceDescription","name","amazon","apple","addDeleteBTn","btn","event","bookId","deleteBook","bookIndex","book","updateBooks","containerEmpty","length"],"mappings":"4DAGA,MAAMA,EAAe,SAAS,cAAc,gBAAgB,EAEtDC,EAAc,KAAK,MAAM,aAAa,QAAQ,eAAe,CAAC,GAAK,GAEzED,EAAa,mBAAmB,YAAaE,EAAeD,CAAW,CAAC,EAExE,SAASC,EAAeD,EAAa,CACnC,OAAOA,EACJ,IACC,CAAC,CACC,WAAAE,EACA,MAAAC,EACA,UAAAC,EACA,YAAAC,EACA,OAAAC,EACA,UAAAC,EACA,IAAAC,CACR,KACaH,IACHA,EACE,mHAEG;AAAA;AAAA,gBAECH,CAAU,UAAUC,CAAK;AAAA;AAAA,oCAELA,CAAK;AAAA,kCACPM,EAAiB,GAAIL,CAAS,CAAC;AAAA,yCACxBK,EAAiB,IAAKJ,CAAW,CAAC;AAAA;AAAA,oCAEvCI,EAAiB,GAAIH,CAAM,CAAC;AAAA;AAAA;AAAA,eAI1DC,EAAU,OAAO,CAAC,CAAE,KAAAG,KACXA,IAAS,QACjB,EAAE,GACJ,6DAA4DC,CAAM;AAAA;AAAA;AAAA,eAIjEJ,EAAU,OAAO,CAAC,CAAE,KAAAG,KACXA,IAAS,OACjB,EAAE,GACJ,2DAA0DE,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAMhCJ,CAAG;AAAA;AAAA;AAAA;AAAA,WAMlC,EACA,KAAK,EAAE,CACZ,CAEAK,IAEA,SAASA,GAAe,CACJ,SAAS,iBAAiB,kBAAkB,EAEpD,QAAQC,GAAO,CACvBA,EAAI,iBAAiB,QAASC,GAAS,CACrC,MAAMC,EAASD,EAAM,cAAc,QAAQ,GAC3CE,EAAWD,CAAM,CACvB,CAAK,CACL,CAAG,CACH,CAEA,SAASC,EAAWD,EAAQ,CAC1B,MAAME,EAAYlB,EAAY,UAAUmB,GAAQH,IAAWG,EAAK,GAAG,EAC/DD,IAAc,KAChBlB,EAAY,OAAOkB,EAAW,CAAC,EAC/B,aAAa,QAAQ,gBAAiB,KAAK,UAAUlB,CAAW,CAAC,EACjEoB,IACArB,EAAa,UAAY,GACzBA,EAAa,mBAAmB,YAAaE,EAAeD,CAAW,CAAC,EAExEa,IAEJ,CAEAO,IAEA,SAASA,GAAc,CACrB,MAAMC,EAAiB,SAAS,cAAc,uBAAuB,EACjErB,EAAY,SAAW,GACzBqB,EAAe,MAAM,QAAU,QAC/BtB,EAAa,MAAM,QAAU,SAE7BsB,EAAe,MAAM,QAAU,OAC/BtB,EAAa,MAAM,QAAU,OAEjC,CAEA,SAASU,EAAiBa,EAAQnB,EAAO,CACvC,OAAIA,EAAM,OAASmB,EACVnB,EAAM,MAAM,EAAGmB,CAAM,EAAI,MAEzBnB,CAEX"}