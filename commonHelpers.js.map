{"version":3,"file":"commonHelpers.js","sources":["../src/js/header.js","../src/js/API.js","../src/js/best-sellers.js","../src/js/categories.js"],"sourcesContent":["const refs = { \ncloseMenuElem : document.querySelector('.btn-close-menu'),\nopenMenuElem : document.querySelector('.btn-open-menu'),\nmodalMenuElem : document.querySelector('.mob-menu'),\n};\n\nrefs.closeMenuElem.addEventListener('click', ()=>{\n  refs.modalMenuElem.classList.remove('is-visible');\n})\n\nrefs.openMenuElem.addEventListener( 'click', ()=>{\n    refs.modalMenuElem.classList.add('is-visible');\n})\n\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://books-backend.p.goit.global/books';\n\nexport async  function getCategoriesBooks(){\n    const res = await axios.get('/category-list');\n    return res.data;\n}\n\nexport async function getTopBooks(){\n    const res = await axios.get('/top-books');\n    return res.data;\n}\n\nexport async function getBooksByCategory (category){\n    const res = await axios.get(`/category?category=${category}`);\n    return res.data;\n}\n\nexport async function getBookById(bookId){\n    const res = await axios.get(`/${bookId}`);\n    return res.data;\n}\n\n \n ","import {getTopBooks} from './API';\nimport {getBooksByCategory} from './API';\n\nconst bestBooksContainer = document.querySelector('.best-books-container');\n\nrenderBestBooks();\n\nexport async function renderBestBooks(){\n    bestBooksContainer.insertAdjacentHTML('afterbegin', `\n    <h1 class=\"best-sellers-title\">Best Sellers <span class=\"accent-books\">Books</span></h1>\n    <ul class=\"best-sellers-books\"></ul>\n    `);\n    const bestBooksList = document.querySelector('.best-sellers-books');\n        const result = await getTopBooks();\n        result.map(book => {\n            const markup = createBooksCard(book);\n            bestBooksList.insertAdjacentHTML('beforeend', markup);\n        })\n        const btnSeeMore = document.querySelectorAll('.btn-see-more');\n        btnSeeMore.forEach(btn => {\n            btn.addEventListener('click', handleSeeMore);\n        })\n}\n\n \nfunction createBooksCard (category){\n    const bookItem = category.books.map(book => createBookCard(book)).join('');\n    return `<li class=\"best-category\">\n    <p class=\"best-category-name\">${category.list_name}</p>\n    <ul class=\"best-book-list\">${bookItem}</ul>\n    <button value=\"${category.list_name}\" type=\"button\" class=\"btn-see-more\">See more</button>\n    </li>`\n}\n\n\n\nfunction createBookCard ({book_image, title, _id, author}){\n    return ` <li class=\"best-book-item\">\n    <img src=\"${book_image}\" alt=\"${title}\" data-id=\"${_id}\" class=\"best-book-img\" width=\"375\" height=\"485\"/>\n    <h2 class=\"best-book-title\">${sliceTitle(16, title)}</h2>\n    <p class=\"best-book-author\">${author}</p>\n    </li>\n    `\n}\n\nfunction sliceTitle(length, title){\n    if(title.length> length){\n       return title.slice(0, length) + '...';\n    } else {\n        return title;\n    }\n}\n\n\n \nasync function handleSeeMore(e){\n    e.preventDefault();\n    const books = await getBooksByCategory(e.target.value);\n    const targetTitle = changeColor(e.target.value);\n    const markupBooks = books.map(book => {\n        return `\n        <h2 class=\"selected-category-title\">${targetTitle}</h2>\n        <ul class=\"book-list-category\">${createBookCard(book)}</ul>`\n    });\n    bestBooksContainer.innerHTML = '';\n    bestBooksContainer.insertAdjacentHTML('afterbegin', markupBooks);\n    window.scrollTo({top: 0, behavior:'smooth'});\n    const categoriesItems = document.querySelectorAll('.item-categories');\n    categoriesItems.forEach(item =>{\n        item.textContent === e.target.value ? item.classList.add('active') : item.classList.remove('active');\n    })\n    }\n    \n    function changeColor(name){\n        const splitName = name.split(' ');\n        const lastWord = splitName[splitName.length - 1];\n        const withoutLastWord = splitName.slice(0, -1);\n        const firstWords = withoutLastWord.join(' ');\n    \n     return `${firstWords} <span class=\"accent-books\">${lastWord}</span>`\n    }\n    ","import {getCategoriesBooks} from './API';\nimport {getBooksByCategory} from './API'\nimport {renderBestBooks} from './best-sellers'\nconst listCategories = document.querySelector('.list-categories');\n\n//Відмалювали категорії\n\nasync function categoriesData (){\n    try{\n    const result = await getCategoriesBooks();\n    const sorted = result.sort((a,b)=>a.list_name.localeCompare(b.list_name));\n    const list = categoriesTemplate(sorted);\n    listCategories.insertAdjacentHTML('beforeend', list);\n    } catch(error){\n        console.error('Error fetching categories:', error);\n    }\n}\n \n\nfunction categoryTemplate ({list_name}){\n    const markup = `\n     <li class=\"item-categories\">${list_name}</li>\n    `\n    return markup;\n}\n\n \n   function categoriesTemplate (res){\n   const markup =  res.map(categoryTemplate).join('');\n   return markup;\n}\n categoriesData()\n\n\n //Виділяємо обрану категорію і робимо розмімтку для неї\n\n const bestBooksContainer = document.querySelector('.best-books-container');\n const firstItemCategory = document.querySelector('.item-categories');\n firstItemCategory.classList.add('active');\n\n \n listCategories.addEventListener('click', event => {\n    bestBooksContainer.innerHTML = '';\n    bestBooksContainer.insertAdjacentHTML('afterbegin', `\n    <h2 class=\"selected-category-title\"> <span class=\"selected-category-accent\"></span></h2>\n    <ul class=\"book-list-category\"></ul>`);\n\n\n  if(event.target && event.target.matches('li.item-categories')){\n    let category = event.target.textContent;\n   const allCategoriesItems = document.querySelectorAll('.item-categories');\n   allCategoriesItems.forEach(category =>{\n    category.classList.remove('active')\n   });\n   event.target.classList.add('active');\n    if(category === 'All Categories'){\n        renderBestBooks();\n        return;\n    }\n    displayBooks(category);\n  }\n });\n\n\n    \n async function displayBooks(category){\nconst bookListCategory = document.querySelector('.book-list-category');\nbookListCategory.innerHTML = '';\nconst books = await getBooksByCategory(category);\nconst booksMarkup = books.map(book =>{\n    return ` <li>\n    <img src=\"${book.book_image}\" alt=\"${book.title}\" data-id=\"${book._id}\"/>\n    <h3>${book.title}</h3>\n    <p>${book.author}</p>\n    </li>\n    `\n}).join('');\nbookListCategory.insertAdjacentHTML('afterbegin', booksMarkup);\n\nconst categorySplit = category.split(' ');\nconst lastWord = categorySplit[categorySplit.length - 1];\nconst titleAccentCategory = document.querySelector('.selected-category-accent');\ntitleAccentCategory.textContent = lastWord;\nconst  titleCategory = document.querySelector('.selected-category-title');\nconst withoutLastWord = categorySplit.slice(0, -1);\n const firstWords = withoutLastWord.join(' ');\ntitleCategory.insertAdjacentHTML('afterbegin', firstWords);\n }"],"names":["refs","axios","getCategoriesBooks","getTopBooks","getBooksByCategory","category","bestBooksContainer","renderBestBooks","bestBooksList","book","markup","createBooksCard","btn","handleSeeMore","bookItem","createBookCard","book_image","title","_id","author","sliceTitle","length","books","targetTitle","changeColor","markupBooks","item","name","splitName","lastWord","listCategories","categoriesData","sorted","a","b","list","categoriesTemplate","error","categoryTemplate","list_name","res","firstItemCategory","event","displayBooks","bookListCategory","booksMarkup","categorySplit","titleAccentCategory","titleCategory","firstWords"],"mappings":"svBAAA,MAAMA,EAAO,CACb,cAAgB,SAAS,cAAc,iBAAiB,EACxD,aAAe,SAAS,cAAc,gBAAgB,EACtD,cAAgB,SAAS,cAAc,WAAW,CAClD,EAEAA,EAAK,cAAc,iBAAiB,QAAS,IAAI,CAC/CA,EAAK,cAAc,UAAU,OAAO,YAAY,CAClD,CAAC,EAEDA,EAAK,aAAa,iBAAkB,QAAS,IAAI,CAC7CA,EAAK,cAAc,UAAU,IAAI,YAAY,CACjD,CAAC,ECVDC,EAAM,SAAS,QAAU,4CAElB,eAAgBC,GAAoB,CAEvC,OADY,MAAMD,EAAM,IAAI,gBAAgB,GACjC,IACf,CAEO,eAAeE,GAAa,CAE/B,OADY,MAAMF,EAAM,IAAI,YAAY,GAC7B,IACf,CAEO,eAAeG,EAAoBC,EAAS,CAE/C,OADY,MAAMJ,EAAM,IAAI,sBAAsBI,CAAQ,EAAE,GACjD,IACf,CCdA,MAAMC,EAAqB,SAAS,cAAc,uBAAuB,EAEzEC,IAEO,eAAeA,GAAiB,CACnCD,EAAmB,mBAAmB,aAAc;AAAA;AAAA;AAAA,KAGnD,EACD,MAAME,EAAgB,SAAS,cAAc,qBAAqB,GAC/C,MAAML,KACd,IAAIM,GAAQ,CACf,MAAMC,EAASC,EAAgBF,CAAI,EACnCD,EAAc,mBAAmB,YAAaE,CAAM,CAChE,CAAS,EACkB,SAAS,iBAAiB,eAAe,EACjD,QAAQE,GAAO,CACtBA,EAAI,iBAAiB,QAASC,CAAa,CACvD,CAAS,CACT,CAGA,SAASF,EAAiBN,EAAS,CAC/B,MAAMS,EAAWT,EAAS,MAAM,IAAII,GAAQM,EAAeN,CAAI,CAAC,EAAE,KAAK,EAAE,EACzE,MAAO;AAAA,oCACyBJ,EAAS,SAAS;AAAA,iCACrBS,CAAQ;AAAA,qBACpBT,EAAS,SAAS;AAAA,UAEvC,CAIA,SAASU,EAAgB,CAAC,WAAAC,EAAY,MAAAC,EAAO,IAAAC,EAAK,OAAAC,CAAM,EAAE,CACtD,MAAO;AAAA,gBACKH,CAAU,UAAUC,CAAK,cAAcC,CAAG;AAAA,kCACxBE,EAAW,GAAIH,CAAK,CAAC;AAAA,kCACrBE,CAAM;AAAA;AAAA,KAGxC,CAEA,SAASC,EAAWC,EAAQJ,EAAM,CAC9B,OAAGA,EAAM,OAAQI,EACPJ,EAAM,MAAM,EAAGI,CAAM,EAAI,MAExBJ,CAEf,CAIA,eAAeJ,EAAc,EAAE,CAC3B,EAAE,eAAc,EAChB,MAAMS,EAAQ,MAAMlB,EAAmB,EAAE,OAAO,KAAK,EAC/CmB,EAAcC,EAAY,EAAE,OAAO,KAAK,EACxCC,EAAcH,EAAM,IAAIb,GACnB;AAAA,8CAC+Bc,CAAW;AAAA,yCAChBR,EAAeN,CAAI,CAAC,OACxD,EACDH,EAAmB,UAAY,GAC/BA,EAAmB,mBAAmB,aAAcmB,CAAW,EAC/D,OAAO,SAAS,CAAC,IAAK,EAAG,SAAS,QAAQ,CAAC,EACnB,SAAS,iBAAiB,kBAAkB,EACpD,QAAQC,GAAO,CAC3BA,EAAK,cAAgB,EAAE,OAAO,MAAQA,EAAK,UAAU,IAAI,QAAQ,EAAIA,EAAK,UAAU,OAAO,QAAQ,CAC3G,CAAK,CACA,CAED,SAASF,EAAYG,EAAK,CACtB,MAAMC,EAAYD,EAAK,MAAM,GAAG,EAC1BE,EAAWD,EAAUA,EAAU,OAAS,CAAC,EAIlD,MAAO,GAHoBA,EAAU,MAAM,EAAG,EAAE,EACV,KAAK,GAAG,CAE1B,+BAA+BC,CAAQ,SAChE,CC7EA,MAAMC,EAAiB,SAAS,cAAc,kBAAkB,EAIhE,eAAeC,GAAiB,CAC5B,GAAG,CAEH,MAAMC,GADS,MAAM9B,KACC,KAAK,CAAC+B,EAAEC,IAAID,EAAE,UAAU,cAAcC,EAAE,SAAS,CAAC,EAClEC,EAAOC,EAAmBJ,CAAM,EACtCF,EAAe,mBAAmB,YAAaK,CAAI,CAClD,OAAOE,EAAM,CACV,QAAQ,MAAM,6BAA8BA,CAAK,CACpD,CACL,CAGA,SAASC,EAAkB,CAAC,UAAAC,CAAS,EAAE,CAInC,MAHe;AAAA,mCACgBA,CAAS;AAAA,KAG5C,CAGG,SAASH,EAAoBI,EAAI,CAEjC,OADgBA,EAAI,IAAIF,CAAgB,EAAE,KAAK,EAAE,CAEpD,CACCP,EAAgB,EAKhB,MAAMzB,EAAqB,SAAS,cAAc,uBAAuB,EACnEmC,EAAoB,SAAS,cAAc,kBAAkB,EACnEA,EAAkB,UAAU,IAAI,QAAQ,EAGxCX,EAAe,iBAAiB,QAASY,GAAS,CAOjD,GANEpC,EAAmB,UAAY,GAC/BA,EAAmB,mBAAmB,aAAc;AAAA;AAAA,yCAEf,EAGpCoC,EAAM,QAAUA,EAAM,OAAO,QAAQ,oBAAoB,EAAE,CAC5D,IAAIrC,EAAWqC,EAAM,OAAO,YAM5B,GAL0B,SAAS,iBAAiB,kBAAkB,EACpD,QAAQrC,GAAW,CACrCA,EAAS,UAAU,OAAO,QAAQ,CACtC,CAAI,EACDqC,EAAM,OAAO,UAAU,IAAI,QAAQ,EAC/BrC,IAAa,iBAAiB,CAC7BE,IACA,MACH,CACDoC,EAAatC,CAAQ,CACtB,CACH,CAAE,EAID,eAAesC,EAAatC,EAAS,CACtC,MAAMuC,EAAmB,SAAS,cAAc,qBAAqB,EACrEA,EAAiB,UAAY,GAE7B,MAAMC,GADQ,MAAMzC,EAAmBC,CAAQ,GACrB,IAAII,GACnB;AAAA,gBACKA,EAAK,UAAU,UAAUA,EAAK,KAAK,cAAcA,EAAK,GAAG;AAAA,UAC/DA,EAAK,KAAK;AAAA,SACXA,EAAK,MAAM;AAAA;AAAA,KAGnB,EAAE,KAAK,EAAE,EACVmC,EAAiB,mBAAmB,aAAcC,CAAW,EAE7D,MAAMC,EAAgBzC,EAAS,MAAM,GAAG,EAClCwB,EAAWiB,EAAcA,EAAc,OAAS,CAAC,EACjDC,EAAsB,SAAS,cAAc,2BAA2B,EAC9EA,EAAoB,YAAclB,EAClC,MAAOmB,EAAgB,SAAS,cAAc,0BAA0B,EAEjEC,EADiBH,EAAc,MAAM,EAAG,EAAE,EACb,KAAK,GAAG,EAC5CE,EAAc,mBAAmB,aAAcC,CAAU,CACzD"}