import{a as u,b as v}from"./assets/vendor-27708577.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const g={closeMenuElem:document.querySelector(".btn-close-menu"),openMenuElem:document.querySelector(".btn-open-menu"),modalMenuElem:document.querySelector(".mob-menu")};g.closeMenuElem.addEventListener("click",()=>{g.modalMenuElem.classList.remove("is-visible")});g.openMenuElem.addEventListener("click",()=>{g.modalMenuElem.classList.add("is-visible")});u.defaults.baseURL="https://books-backend.p.goit.global/books";async function L(){return(await u.get("/category-list")).data}async function S(){return(await u.get("/top-books")).data}async function h(e){return(await u.get(`/category?category=${e}`)).data}async function w(e){return(await u.get(`/${e}`)).data}const q="data:image/png;base64,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",W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAN/SURBVHgB7VdJjExBGP7+6uluYmgkthmS0YdhLpYgHIZEuFhCiHBxJXFzEOHiKBFbuFhCxBEniUQcjEhExBJMIhwsI5a2RmaEWbpf/f5+vVW9rvf6dTJu8yeVrqr31V9f/VtVA2NSEor6yOfTnV6y0E2gaQpIaY7Gm6IIrDXyDP6c0N4j2oWXaIYEX8Q8RvKKdBdi9OQtjeTX0B70oREJPof5rJIPQJQpz8DNNWw+EpcnxlLaNdJrIlrqllDqpqzL+GvdPBvMR+KSovYaM+YT1XZQJqJwNrUVmjqkodg48BvW2DHmkLH8dnrn0uvMfS0SxLSaWYDlhsBvWINjjJBxqa82mPta7hCWWXKZuWUikN0Iamkt2gvc3wd8vC2slY1rXwWamAUSKfDfHPDtMfAnB4eH2kJJKKY0cwC/7ABo0V4gPcnQIfL1CfStncDAe6B1NtTaC8DsVTZmuB/88Ai495Sc0FRMrda+5kB7MjZ8SR2bQcsPWQSqMmMJaO0lwYmSTdctAlVJZ0ArD4Oy26yYUcwq1BLggHknzEGUUNsKcKYLmNoVicO4GaVYqIi2XW6T8IqaDUDANU6ZsqAxhv14q0VbIOzswKxEb0V0jGpALY0QJb26Vhg4cDpbg2+mJi3BMYoWw3ZBlCWgFWplluNv0CyJaEuYNGOW5dgkjHGgvtS7o2yE0uI4loiJqViCAoTgsAQb2UEajfXHwFRLtt8v8ohKUU7YlS2OqWORgBUTHBmYdXXC6A9JCf7xxvcntS9yY7w8+KdgBvtB0+cB4yeXiVJdgQolIbcoWyW+mCCfnkPfOAjOPRVFhdLkuMlQy3dDrdlftZbuOQF+cAY89AuVoKb2xVBbTjeXHfImLNe1Eki/kDvh0WU5YcFYKN//9kPfOSrdhG8Jfesw9L2TZUgtu/jDM3inusUiGcttHBUTYonf1Y2KMvDD/Iqg6J5jQEc3+NlVub4TcIuk4+Bva70E83AoCU9TLgHrzHWxSdXT+DSA13f90l3JJK7D1PQYFehdgKbBiNUNjni2uZ5u/s1b/4SDS09lXlb0uA5WYU4j+2a+kgTpxP+TvtTRL3MRZgn/DtV6OzQX/EAa7ebxgBTD9UFWzuTlAzM78sMoPiKzCBNXwEQK97KiHenjuVcuVeHL9s7q8pRaxqzbpJImm/0bKPEyIhn8nRN837X5mATlH/NXv+oaRoVuAAAAAElFTkSuQmCC",T="/Books-project/assets/barnes-and-noble-ee0e2630.png",I="/Books-project/assets/books-a-million-6e265484.png",M="/Books-project/assets/bookshop-0c971e03.png",Y="/Books-project/assets/indiebound-cc4cda19.png",f="shopping-list",d=V(f)||[],k=async e=>{if(e.preventDefault(),e.target.nodeName!=="IMG")return;const t=e.target.dataset.id,a=await w(t);N(a);const n=document.querySelector(".addBtn");n.addEventListener("click",j(a)),d.length>0&&(d.some(s=>t===s._id)?(n.textContent="Remove from the shopping list",n.classList.add("mobileWidth")):n.textContent="Add to shopping list")},j=e=>t=>{if(t.preventDefault(),t.target.textContent==="Remove from the shopping list"){t.target.textContent="Add to shopping list",t.target.classList.remove("mobileWidth");const a=d.findIndex(n=>n._id===e._id);d.splice(a,1),R()}else t.target.textContent="Remove from the shopping list",t.target.classList.add("mobileWidth"),d.push(e),U();localStorage.setItem(f,JSON.stringify(d))};function V(e){const t=localStorage.getItem(e);try{return JSON.parse(t)}catch{return t}}function N({book_image:e,title:t,author:a,description:n,buy_links:o}){n===""&&(n="Book description has not been added yet...");const s=v.create(`<div class="modal"> 
 <button type="button" class="modal-close-btn">
<svg>
<use href="../img/sprite.svg#icon-x-close" class="modal-close-icon"></use>
</svg>
</button>
<div class="img-container">
<div class="img-top-container"> 
<img src="${e}" alt="${t}" class="img-modal"/>
</div>
<div class="img-bottom-container">
<h2 class="title-modal">${t}</h2>
<p class="author-modal">${a}</p>
<p class="description-modal">${n}</p>
<ul class="buy-links-container"></ul>
</div>
</div>
<button class="addBtn" type="submit">Add to shopping list</button>
</div>
`,{onShow:r=>{document.body.style.overflow="hidden";const m=r.element().querySelector(".modal-close-btn");m.onclick=()=>r.close()},onClose:r=>{document.body.style.overflow="visible"}}),i=s.element().querySelector(".buy-links-container");x({buy_links:o,book_image:e,title:t,author:a},i),s.show(),document.addEventListener("keydown",c);function c(r){r.key==="Escape"&&(s.close(),document.removeEventListener("keydown",c))}}function x({buy_links:e,book_image:t,title:a,author:n},o){e.forEach(s=>{const i=document.createElement("li");o.appendChild(i);const c=document.createElement("a");i.appendChild(c);const r=document.createElement("img");c.appendChild(r),c.target="_blank",r.alt=s.name+" Icon",r.className="img-shop",i.className="item-shop";const A=`${t}`.split("/").pop().split(".")[0];switch(s.name){case"Amazon":c.href=s.url,r.src=q;break;case"Apple Books":c.href=s.url,r.src=W,r.className="booksIconApple";break;case"Barnes and Noble":c.href=s.url,r.src=T;break;case"Books-A-Million":c.href=`https://www.booksamillion.com/p/${a}/${n}/${A}`,r.src=I;break;case"Bookshop":c.href=`https://bookshop.org/search?keywords=${A}`,r.src=M;break;default:c.href=`https://bookshop.org/p/books/atomic-habits-an-easy-proven-way-to-build-good-habits-break-bad-ones-james-clear/12117739?ean=${A}`,r.src=Y;break}})}function U(){const e=document.querySelector(".modal"),t=document.createElement("p");t.className="congratulation",t.textContent="Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.",e.appendChild(t)}function R(){const e=document.querySelector(".congratulation");e&&e.remove()}const p=document.querySelector(".best-books-container");y();E();async function y(){p.insertAdjacentHTML("afterbegin",`
    <h1 class="best-sellers-title">Best Sellers <span class="accent-books">Books</span></h1>
    <ul class="best-sellers-books"></ul>
    `);const e=document.querySelector(".best-sellers-books");(await S()).map(n=>{const o=H(n);e.insertAdjacentHTML("beforeend",o)}),document.querySelectorAll(".btn-see-more").forEach(n=>{n.addEventListener("click",Q)})}function H(e){const t=e.books.map(a=>B(a)).join("");return`<li class="best-category">
    <p class="best-category-name">${e.list_name}</p>
    <ul class="best-book-list">${t}</ul>
    <button value="${e.list_name}" type="button" class="btn-see-more">See more</button>
    </li>`}function B({book_image:e,title:t,_id:a,author:n}){return` <li class="best-book-item">
    <img src="${e}" alt="${t}" data-id="${a}" class="best-book-img" width="375" height="485"/>
    <h2 class="best-book-title">${K(16,t)}</h2>
    <p class="best-book-author">${n}</p>
    </li>
    `}function K(e,t){return t.length>e?t.slice(0,e)+"...":t}async function Q(e){e.preventDefault();const t=await h(e.target.value),a=D(e.target.value),n=t.map(s=>`
        <h2 class="selected-category-title">${a}</h2>
        <ul class="book-list-category">${B(s)}</ul>`);p.innerHTML="",p.insertAdjacentHTML("afterbegin",n),E(),window.scrollTo({top:0,behavior:"smooth"}),document.querySelectorAll(".item-categories").forEach(s=>{s.textContent===e.target.value?s.classList.add("active"):s.classList.remove("active")})}function D(e){const t=e.split(" "),a=t[t.length-1];return`${t.slice(0,-1).join(" ")} <span class="accent-books">${a}</span>`}function E(){p.addEventListener("click",function(e){e.target.classList.contains("best-book-img")&&k(e)})}const C=document.querySelector(".list-categories");async function J(){try{const t=(await L()).sort((n,o)=>n.list_name.localeCompare(o.list_name)),a=z(t);C.insertAdjacentHTML("beforeend",a)}catch(e){console.error("Error fetching categories:",e)}}function G({list_name:e}){return`
     <li class="item-categories">${e}</li>
    `}function z(e){return e.map(G).join("")}J();const b=document.querySelector(".best-books-container"),O=document.querySelector(".item-categories");O.classList.add("active");C.addEventListener("click",e=>{if(b.innerHTML="",b.insertAdjacentHTML("afterbegin",`
    <h2 class="selected-category-title"> <span class="selected-category-accent"></span></h2>
    <ul class="book-list-category"></ul>`),document.querySelector(".book-list-category").addEventListener("click",k),e.target&&e.target.matches("li.item-categories")){let a=e.target.textContent;if(X(a),document.querySelectorAll(".item-categories").forEach(o=>{o.classList.remove("active")}),e.target.classList.add("active"),a==="All Categories"){y();return}}});async function X(e){const t=document.querySelector(".book-list-category");t.innerHTML="";const n=(await h(e)).map(l=>` <li>
    <img src="${l.book_image}" alt="${l.title}" data-id="${l._id}"/>
    <h3>${l.title}</h3>
    <p>${l.author}</p>
    </li>
    `).join("");t.insertAdjacentHTML("afterbegin",n);const o=e.split(" "),s=o[o.length-1],i=document.querySelector(".selected-category-accent");i.textContent=s;const c=document.querySelector(".selected-category-title"),m=o.slice(0,-1).join(" ");c.insertAdjacentHTML("afterbegin",m)}
//# sourceMappingURL=commonHelpers.js.map
